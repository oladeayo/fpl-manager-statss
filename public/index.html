<script>
    window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
  </script>
  <script defer src="/_vercel/insights/script.js"></script>

  <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>FPL Manager Stats</title>
      <script src="https://cdn.tailwindcss.com"></script>
      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
      <link rel="icon" href="path/to/favicon.ico" type="image/x-icon">
  </head>
  <body class="bg-gray-100 min-h-screen">
  
      <!-- Main Container -->
      <div class="container mx-auto px-4 py-8">
          
          <!-- Header Section -->
          <div class="text-center mb-8">
              <h1 class="text-4xl font-bold text-gray-800 mb-4">Check Manager Stats</h1>
              <p class="text-gray-600 text-lg">View your FPL team stats with your Manager ID</p>
          </div>
  
          <!-- Input Section -->
          <div class="max-w-lg mx-auto mb-8">
              <div class="bg-white rounded-lg shadow p-6">
                  <input type="text" 
                         id="managerId" 
                         placeholder="Enter Manager ID" 
                         class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
             <!--     <button onclick="analyzeManager()" 
                          class="mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition duration-200">
                      <i class="fas fa-search"></i> Analyze Stats
                  </button> 
              -->    

                  /* From Uiverse.io by nathAd17 */ 
                  <button
                    type="submit"
                    onclick="analyzeManager()"
                    class="flex justify-center gap-2 items-center mx-auto shadow-xl text-lg bg-gray-50 backdrop-blur-md lg:font-semibold isolation-auto border-gray-50 before:absolute before:w-full before:transition-all before:duration-700 before:hover:w-full before:-left-full before:hover:left-0 before:rounded-full before:bg-emerald-500 hover:text-gray-50 before:-z-10 before:aspect-square before:hover:scale-150 before:hover:duration-700 relative z-10 px-4 py-2 overflow-hidden border-2 rounded-full group"
                  >
                  Analyze Stats
                    <svg
                      class="w-8 h-8 justify-end group-hover:rotate-90 group-hover:bg-gray-50 text-gray-50 ease-linear duration-300 rounded-full border border-gray-700 group-hover:border-none p-2 rotate-45"
                      viewBox="0 0 16 19"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M7 18C7 18.5523 7.44772 19 8 19C8.55228 19 9 18.5523 9 18H7ZM8.70711 0.292893C8.31658 -0.0976311 7.68342 -0.0976311 7.29289 0.292893L0.928932 6.65685C0.538408 7.04738 0.538408 7.68054 0.928932 8.07107C1.31946 8.46159 1.95262 8.46159 2.34315 8.07107L8 2.41421L13.6569 8.07107C14.0474 8.46159 14.6805 8.46159 15.0711 8.07107C15.4616 7.68054 15.4616 7.04738 15.0711 6.65685L8.70711 0.292893ZM9 18L9 1H7L7 18H9Z"
                        class="fill-gray-800 group-hover:fill-gray-800"
                      ></path>
                    </svg>
                  </button>
                  
              </div>
          </div>
  
          <!-- Results Section -->
          <div id="results" class="max-w-4xl mx-auto space-y-6"></div>
  
          <!-- Share Button -->
          <div class="flex justify-center mt-8">
              <button onclick="shareApp()" 
                      class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg flex items-center gap-2 transition duration-200">
                  <i class="fas fa-share-alt"></i> Share
              </button>
          </div>
  
          <!-- Footer Section -->
          <div class="text-center mt-12">
              <p class="text-gray-600">Created by 
                  <a href="https://twitter.com/Oladeeayo" target="_blank" class="text-blue-500 font-medium hover:underline">
                      Oladeeayo
                  </a>
              </p>
          </div>
      </div>
  
      <script>
          async function analyzeManager() {
              const managerId = document.getElementById('managerId').value;
              const resultsDiv = document.getElementById('results');
  
              // Display loading spinner
              resultsDiv.innerHTML = `
                  <div class="flex justify-center items-center py-8">
                      <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
                  </div>
              `;
  
              try {
                  const response = await fetch(`/api/analyze-manager/${managerId}`);
                  const data = await response.json();
  
                  // Manager Information
                  let html = `
                      <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                          <h2 class="text-2xl font-bold text-gray-800 mb-4">Manager's Summary</h2>
                          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                              <div class="space-y-2">
                                  <p class="text-gray-600"><strong>Name:</strong> ${data.managerInfo.name}</p>
                                  <p class="text-gray-600"><strong>Team Name:</strong> ${data.managerInfo.teamName}</p>
                                  <p class="text-gray-600"><strong>Total Points:</strong> ${data.managerInfo.managerPoints}</p>
                                  <p class="text-gray-600"><strong>Total Points Lost on Bench:</strong> ${data.managerInfo.totalPointsLostOnBench}</p>
                                  <p class="text-gray-600"><strong>Total Captain Points:</strong> ${data.managerInfo.totalCaptaincyPoints}</p>
                              </div>
                              <div class="space-y-2">
                                  <p class="text-gray-600"><strong>Chips Used:</strong> ${data.managerInfo.allChipsUsed}</p>
                                  <p class="text-gray-600"><strong>Point Difference to World No 1:</strong> ${data.managerInfo.pointDifference}</p>
                                  <p class="text-gray-600"><strong>Overall Rank:</strong> ${data.managerInfo.overallRanking}</p>
                                  <p class="text-gray-600"><strong>2023/2024 Rank:</strong> ${data.managerInfo.lastSeasonRank}</p>
                                  <p class="text-gray-600"><strong>2022/2023 Rank:</strong> ${data.managerInfo.seasonBeforeLastRank}</p>
                              </div>
                          </div>
                      </div>
                  `;
  
                  // Player Stats Table
                  html += `
                      <div class="bg-white rounded-lg shadow-lg p-6">
                          <h2 class="text-2xl font-bold text-gray-800 mb-4">Squad Performance</h2>
                          <div class="overflow-x-auto">
                              <table class="min-w-full bg-white border rounded-lg">
                                  <thead class="bg-gray-50">
                                      <tr>
                                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Player Name</th>
                                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Team</th>
                                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Position</th>
                                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Points</th>
                                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Games</th>
                                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Starts</th>
                                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Captain Points</th>
                                      </tr>
                                  </thead>
                                  <tbody class="bg-white divide-y divide-gray-200">
                  `;
  
                  data.playerStats.forEach((player, index) => {
                      html += `
                          <tr class="${index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}">
                              <td class="px-6 py-4 text-sm font-medium text-gray-900">${player.name}</td>
                              <td class="px-6 py-4 text-sm text-gray-500">${player.team}</td>
                              <td class="px-6 py-4 text-sm text-gray-500">${player.position}</td>
                              <td class="px-6 py-4 text-sm text-gray-500">${player.totalPointsActive}</td>
                              <td class="px-6 py-4 text-sm text-gray-500">${player.gwInSquad}</td>
                              <td class="px-6 py-4 text-sm text-gray-500">${player.starts}</td>
                              <td class="px-6 py-4 text-sm text-gray-500">${player.cappedPoints}</td>
                          </tr>
                      `;
                  });
  
                  html += `</tbody></table></div></div>`;
                  resultsDiv.innerHTML = html;
              } catch (error) {
                  resultsDiv.innerHTML = `
                      <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded-lg">
                          <div class="flex">
                              <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                              <p class="text-red-700 font-medium">Error: ${error.message}</p>
                          </div>
                      </div>
                  `;
              }
          }
  
          function shareApp() {
              const shareText = "Check out my Fantasy Premier League Manager Stats!";
              const shareUrl = window.location.href;
  
              if (navigator.share) {
                  navigator.share({
                      title: document.title,
                      text: shareText,
                      url: shareUrl
                  });
              } else {
                  const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
                  const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`;
                  const linkedInUrl = `https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(shareUrl)}`;
  
                  window.open(twitterUrl, "_blank");
                  window.open(facebookUrl, "_blank");
                  window.open(linkedInUrl, "_blank");
              }
          }
      </script>
  </body>
  </html>
  